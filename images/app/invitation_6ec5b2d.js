!function(){function e(e){function t(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}e=e||{},e.type=(e.type||"GET").toUpperCase(),e.data=e.data||{},e.header=e.header||{};var n=null;n=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"POST"==e.type?(n.open(e.type,e.url,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.data=t(e.data)):"GET"==e.type&&(e.url+="?"+t(e.data),n.open(e.type,e.url,!0),e.data=null);for(var a in e.header)n.setRequestHeader(a,e.header[a]);n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(/^\{(?:.*)\}$/.test(n.responseText)?e.success&&e.success.call(n,JSON.parse(n.responseText)):e.success&&e.success.call(n,n.responseText))},n.send(e.data)}function t(e){if(location.search){var t=new RegExp(e+"=([^&$]+)"),n=location.search.match(t);return n&&n[1]?n[1]:null}return null}var n="http://api.tinman.cn/jojosherlock/v1/",a=document.getElementById("mask"),c=document.getElementById("shareSingle"),s=document.getElementById("shareAll"),o=document.getElementById("loading"),i=document.getElementById("content"),r=t("userId");c.addEventListener("click",function(){stat({siteId:7,moduleName:"微信邀请送课程",objectName:"click_friend",userId:r,"package":"wechat"}),a.style.display="block"}),s.addEventListener("click",function(){stat({siteId:7,moduleName:"微信邀请送课程",objectName:"click_circle_friends",userId:r,"package":"wechat"}),a.style.display="block"}),a.addEventListener("click",function(){a.style.display="none"}),r&&(stat({siteId:7,userId:r,moduleName:"微信邀请送课程",objectName:"scan_code","package":"wechat"}),e({url:n+"wechat/getWechatUserInfo",data:{userId:r},success:function(t){if(200==t.status){t.data=t.data||{};var n=t.data.nickname||"";e({url:"http://api.tinman.cn/jojosherlock/v1/wechat/getJsapiConfig",data:{userId:r,url:encodeURIComponent(location.href)},success:function(e){if(200!=e.status)return alert(e.info);var t=e.data;wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),wx.ready(function(){wx.onMenuShareAppMessage({title:"接受"+(n||"小伙伴")+"的邀请，体验最有趣的识字课程",desc:"孩子在快乐游戏中学汉字\n学习+复习，识字有效率\n每天10分钟，自信上小学\n全球超过3000万用户",link:"http://api.tinman.cn/jojosherlock/web/accept-invitation.html"+location.search,imgUrl:"http://web.tinman.cn/static/jojosherlock_cdn/other/icon_wx2.png",type:"link",dataUrl:"",success:function(){stat({siteId:7,userId:r,moduleName:"微信邀请送课程",objectName:"scan_code_sharesuccess","package":"wechat"})},cancel:function(){}}),wx.onMenuShareTimeline({title:"你家崽崽该识字了吗？帮我点一点，都有免费课程赠送哦！|  还不点点点点",link:"http://api.tinman.cn/jojosherlock/web/accept-invitation.html"+location.search,imgUrl:"http://web.tinman.cn/static/jojosherlock_cdn/other/icon_wx2.png",success:function(){stat({siteId:7,userId:r,moduleName:"微信邀请送课程",objectName:"scan_code_sharesuccess","package":"wechat"})},cancel:function(){}}),o.style.display="none",i.style.display="block"}),wx.error(function(){})}})}}}))}();