!function(){function e(e){if(location.search){var t=new RegExp(e+"=([^&$]+)"),a=location.search.match(t);return a&&a[1]?a[1]:null}return null}function t(e){var t=[];for(var a in e)t.push(a+"="+e[a]);return t.join("&")}function a(e){e=e||{},e.type=(e.type||"GET").toUpperCase(),e.data=e.data||{},e.header=e.header||{};var a=null;a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),"POST"==e.type?(a.open(e.type,e.url,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.data=t(e.data)):"GET"==e.type&&(e.url+="?"+t(e.data),a.open(e.type,e.url,!0),e.data=null);for(var n in e.header)a.setRequestHeader(n,e.header[n]);a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var t="";try{t=JSON.parse(a.responseText)}catch(n){t=a.responseText}e.success&&e.success.call(a,t)}if(4==a.readyState&&200!=a.status){var t="";try{t=JSON.parse(a.responseText)}catch(n){t=a.responseText}e.error&&e.error.call(a,t)}},a.send(e.data)}function n(e){e=e||{};var t=e.url||location.href.split("#")[0],n=e.userId,r=e.success,o=e.error;a({url:"http://api.tinman.cn/jojosherlock/v1/wechat/getJsapiConfig",type:"GET",data:t?{userId:n,url:encodeURIComponent(t)}:{userId:n},success:function(e){if(200==e.status){var t=e.data;"undefined"!=typeof wx&&wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","chooseWXPay"]}),r&&r()}else o&&o()},error:function(){o&&o()}})}window.tinmanUtils={getParam:e,ajax:a,getJsapiConfig:n,logo:"http://web.tinman.cn/static/jojosherlock_cdn/logo.png"}}();